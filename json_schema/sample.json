{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "A sample contains information on the biosample that was sequenced or imaged. This includes donor, body part, and anything that comes between removing the sample from a donor and the assay.",    "additionalProperties" : false,
    "patternProperties": {
       "^characteristics_.*$": {
            "description": "Fields that begin with characteristics_ can contain any value, and the field name can be anything after the prefix.",
             "type": "string"

       }
    },
    "allOf" : [{"required" : ["id", "type", "ncbi_taxon_id"]}],
    "oneOf" : [{"required" : ["donor_description"], "properties": { "type":  { "enum" : ["donor"]}}},
              {"required" : ["immortalized_cell_line_description"], "properties": { "type":  { "enum" : ["immortalized_cell_line"]}}},
              {"required" : ["cell_suspension_description"], "properties": { "type":  { "enum" : ["cell_suspension"]}}},
              {"required" : ["organoid_description"], "properties": { "type":  { "enum" : ["organoid"]}}},
              {"required" : ["primary_cell_line_description"], "properties": { "type":   { "enum" : ["primary_cell_line"]}}},
              {"required" : ["specimen_from_organism_description"], "properties": { "type":  { "enum" : ["specimen_from_organism"]}}}
              ],

    "properties": {
        "core": { "$ref": "core.json" },
        "type": {
            "description": "The name of the core metadata entity type.",
            "enum": [
                "donor",
                "specimen_from_organism",
                "cell_suspension",
                "organoid",
                "immortalized_cell_line",
                "primary_cell_line"
            ]
        },
        "sample_id":{
            "description": "A local identifier for the sample. Should be unique in the context of the project.",
            "type": "string"
        },
        "name": {
            "description": "A short, descriptive name for the sample that need not be unique.",
            "type": "string"
        },
        "description": {
            "description": "A general description of the sample.",
            "type": "string"
        },
        "donor_description" : {
          "$ref": "donor.json"
        },
        "specimen_from_organism_description" : {
          "$ref": "specimen_from_organism.json"
        },
         "immortalized_cell_line_description" : {
          "$ref": "immortalized_cell_line.json"
        },
        "primary_cell_line_description" : {
          "$ref": "primary_cell_line.json"
        },
        "organoid_description" : {
          "$ref": "organoid.json"
        },
        "cell_suspension_description" : {
          "$ref": "cell_suspension.json"
        },

        "ncbi_taxon_id" : {
          "description": "A taxonomy ID (taxonID) from NCBI.",
          "type" : "integer"
        },
        "genus_species": {
            "description": "Scientific binomial name of donor species. e.g. \"homo sapiens\". NCBI taxon in ontology field.",
            "$ref": "ontology.json"
        },
        "supplementary_files": {
            "description": "A list of filenames of sample-level supplementary files.",
            "items": {
                "type": "string"
            },
            "type": "array"
        },
        "sample_accessions": {
            "type": "object",
            "description": "One or more accession numbers from a standard archive.",
            "additionalProperties" : false,
             "properties": {
                "biosd_sample": {
                    "description": "A DDBJ, NCBI, or EBI BioSample ID. Accessions must start with SAMD, SAMN, or SAME.",
                    "pattern": "^SAM[N|E|D]\d+$",
                    "type": "string"
                },
                "insdc_sample": {
                    "description": "An INSDC (International Nucleotide Sequence Database Collaboration) sample accession. Can be from the DDBJ, EMBL-EBI, or NCBI. Accession must start with DRS, ERS, or SRS.",
                    "pattern": "^[D|E|S]RS\d+$",
                    "type": "string"
                }
            }
        }
    },
    "title": "sample"
}
